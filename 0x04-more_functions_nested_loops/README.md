more C-fuctions, nested loops
